(function(e){function t(t){for(var r,i,s=t[0],l=t[1],u=t[2],f=0,d=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},4474:function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"6fec":function(e,t,n){"use strict";var r=n("eaa4"),a=n.n(r);a.a},"9c0c":function(e,t,n){},bb9a:function(e,t,n){"use strict";var r=n("cbc5"),a=n.n(r);a.a},cbc5:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("5c0b"),n("2877")),s={},l=Object(i["a"])(s,a,o,!1,null,null,null),u=l.exports,c=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Game")],1)},d=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Game"},[n("DebugToolbar"),n("div",{staticClass:"Game_Inner"},[n("ActiveStar"),n("Starmap")],1)],1)},v=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"DebugToolbar"},[n("button",{on:{click:e.newSeed}},[e._v("New seed")]),n("button",{on:{click:e.resetState}},[e._v("Reset state")])])},y=[],m={name:"DebugToolbar",methods:{newSeed:function(){this.$store.commit("game/newRandomSeed")},resetState:function(){delete localStorage.vuex,window.location.reload(!1)}}},g=m,b=(n("6fec"),Object(i["a"])(g,p,y,!1,null,null,null)),S=b.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"Starmap",attrs:{width:e.galaxy.size.x,height:e.galaxy.size.y}},[e._l(e.allNeighbors,(function(t){return n("line",{key:t[0].id+"-"+t[1].id,staticClass:"Edge",class:{"m-active":e.getIsHoveredEdge(t)},attrs:{x1:t[0].point.x,y1:t[0].point.y,x2:t[1].point.x,y2:t[1].point.y,stroke:"gray"}})})),e._l(Object.values(e.galaxy.stars),(function(t){return n("g",{key:t.id+"2",staticClass:"Starmap_Star",class:{"m-travelable":e.getMayTravel(t)},attrs:{id:t.id,"data-id":"star.id"},on:{click:function(n){return e.travel(t)},mouseenter:function(n){return e.setHoveredStar(t)},mouseleave:function(t){return e.setHoveredStar(null)}}},[n("circle",{staticClass:"Starmap_Star_Govt",attrs:{cx:t.point.x,cy:t.point.y,r:10,fill:e.getStarColor(t),"fill-opacity":"0.7"}}),n("circle",{staticClass:"Starmap_Star_Inner",attrs:{cx:t.point.x,cy:t.point.y,r:5,fill:"black",stroke:"white"}}),t.id===e.playerLocationStarID?n("circle",{staticClass:"pulse",attrs:{cx:t.point.x,cy:t.point.y,r:15,stroke:"lightgreen",fill:"transparent"}}):e._e()])})),e.hoveredStar?n("text",{staticClass:"Starmap_Star_Label",attrs:{x:Math.max(2,e.hoveredStar.point.x-40),y:Math.max(2,e.hoveredStar.point.y-20)}},[e._v(" "+e._s(e.getStarName(e.hoveredStar))+" ")]):e._e()],2)},w=[],k=(n("b0c0"),n("d4ec")),O=n("bee2"),j=n("262e"),M=n("2caf"),N=n("9ab4"),I=n("60a3"),_=n("4bb5");function D(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?(console.log(e,t),t):t}var G=Object(_["a"])("game"),C=function(e){Object(j["a"])(n,e);var t=Object(M["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.hoveredStar=null,e}return Object(O["a"])(n,[{key:"getStarColor",value:function(e){return this.govtMap[e.id]?this.govtMap[e.id].color:"#616161"}},{key:"getStarName",value:function(e){return this.metadataMap[e.id]?this.metadataMap[e.id].name:"unknown"}},{key:"getMayTravel",value:function(e){return this.galaxy.getIsConnected(e.id,this.playerLocationStarID)}},{key:"getIsHoveredEdge",value:function(e){var t,n,r=e[0].id===this.playerLocationStarID||e[1].id===this.playerLocationStarID,a=e[0].id===(null===(t=this.hoveredStar)||void 0===t?void 0:t.id)||e[1].id===(null===(n=this.hoveredStar)||void 0===n?void 0:n.id);return r&&a}},{key:"setHoveredStar",value:function(e){this.hoveredStar=e}},{key:"travel",value:function(e){this.galaxy.getIsConnected(e.id,this.playerLocationStarID)&&this.$store.commit("game/travel",e.id)}},{key:"state",get:function(){return this.$store.state}},{key:"allNeighbors",get:function(){return D("allNeighbors",this.galaxy.getAllNeighbors(),!1)}}]),n}(I["b"]);Object(N["a"])([G.State],C.prototype,"seed",void 0),Object(N["a"])([G.State],C.prototype,"playerLocationStarID",void 0),Object(N["a"])([G.Getter],C.prototype,"govtMap",void 0),Object(N["a"])([G.Getter],C.prototype,"metadataMap",void 0),Object(N["a"])([G.Getter],C.prototype,"galaxy",void 0),C=Object(N["a"])([I["a"]],C);var R=C,P=R,A=(n("f851"),Object(i["a"])(P,x,w,!1,null,"89dfce72",null)),L=A.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.star?n("div",{staticClass:"ActiveStar"},[n("h1",[e._v(e._s(e.starMetadata.name))]),n("p",[e._v(e._s(e.starGovt.name))])]):e._e()},T=[],F=Object(_["a"])("game"),z=function(e){Object(j["a"])(n,e);var t=Object(M["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(O["a"])(n,[{key:"state",get:function(){return this.$store.state}}]),n}(I["b"]);Object(N["a"])([F.Getter],z.prototype,"govtMap",void 0),Object(N["a"])([F.Getter],z.prototype,"metadataMap",void 0),Object(N["a"])([F.Getter],z.prototype,"galaxy",void 0),Object(N["a"])([F.Getter("playerStar")],z.prototype,"star",void 0),Object(N["a"])([F.Getter("playerStarGovt")],z.prototype,"starGovt",void 0),Object(N["a"])([F.Getter("playerStarMetadata")],z.prototype,"starMetadata",void 0),z=Object(N["a"])([I["a"]],z);var H=z,K=H,$=Object(i["a"])(K,E,T,!1,null,"42474a7a",null),B=$.exports,q={name:"Game",components:{ActiveStar:B,DebugToolbar:S,Starmap:L}},U=q,X=(n("bb9a"),Object(i["a"])(U,h,v,!1,null,null,null)),Z=X.exports,J={name:"Home",components:{Game:Z}},V=J,W=Object(i["a"])(V,f,d,!1,null,null,null),Q=W.exports;r["a"].use(c["a"]);var Y=[{path:"/",name:"Home",component:Q}],ee=new c["a"]({routes:Y}),te=ee,ne=n("2f62"),re=n("bfa9"),ae=(n("c975"),n("a434"),n("99af"),n("6125")),oe=n.n(ae),ie=function(){function e(t){Object(k["a"])(this,e),this.getRandom=oe()(t)}return Object(O["a"])(e,[{key:"replaceMathRandom",value:function(e){var t=Math.random;Math.random=this.getRandom;var n=e();return Math.random=t,n}},{key:"int",value:function(e,t){return e+Math.floor(this.getRandom()*t)}},{key:"float",value:function(e,t){return e+this.getRandom()*(t-e)}},{key:"choice",value:function(e){return e[Math.floor(this.getRandom()*e.length)]}},{key:"chooseAndRemove",value:function(e){var t=Math.floor(this.getRandom()*e.length);return e.splice(t,1)[0]}},{key:"shuffled",value:function(e){var t=(new Array).concat(e);return this.shuffle(t),t}},{key:"shuffle",value:function(e){var t,n,r=e.length;while(0!==r)n=Math.floor(this.getRandom()*r),r-=1,t=e[r],e[r]=e[n],e[n]=t;return e}},{key:"getSlots",value:function(e){for(var t=new Array,n=this.getRandom(),r=0;r<e;r++)n>2*Math.PI&&(n-=2*Math.PI),t.push(n),n+=2*Math.PI/e;return t}}]),e}(),se=(n("4de4"),n("d81d"),n("07ac"),n("3835")),le=n("b85c");function ue(e,t,n,r){if(e.x===t.x&&e.y===t.y||n.x===r.x&&n.y===r.y)return!1;var a=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0===a)return!1;var o=((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x))/a,i=((t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x))/a;return!(o<0||o>1||i<0||i>1)}n("82fd");function ce(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var fe=function(){function e(t){Object(k["a"])(this,e),this.stars={},this.arrayNeighbors={},this.flatNeighbors={},this.size=t}return Object(O["a"])(e,[{key:"heyNow",value:function(){return Object.values(this.stars)}},{key:"addStar",value:function(e){this.homeStarID||(this.homeStarID=e.id),this.stars[e.id]=e}},{key:"getAllNeighbors",value:function(){var e=this;return Object.values(this.flatNeighbors).map((function(t){return[e.stars[t[0]],e.stars[t[1]]]}))}},{key:"getNeighbors",value:function(e){var t=this;return(this.arrayNeighbors[e.id]||[]).map((function(e){return t.stars[e]}))}},{key:"getNeighborIDs",value:function(e){return this.arrayNeighbors[e]||[]}},{key:"getIsNewPointAllowed",value:function(e){if(e.x<10||e.y<10||e.x>this.size.x-10||e.y>this.size.y-10)return!1;for(var t in this.stars)if(ce(this.stars[t].point,e)<de)return!1;return!0}},{key:"getIsConnectionAllowed",value:function(e,t){var n,r=Object(le["a"])(this.getAllNeighbors());try{for(r.s();!(n=r.n()).done;){var a=Object(se["a"])(n.value,2),o=a[0],i=a[1];if(e!==o&&e!==i&&t!==o&&t!==i&&ue(e.point,t.point,o.point,i.point))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}},{key:"_canonicalize",value:function(e,t){return e.localeCompare(t)<0?"".concat(e,"-").concat(t):"".concat(t,"-").concat(e)}},{key:"getIsConnected",value:function(e,t){return this.flatNeighbors[this._canonicalize(e,t)]}},{key:"connect",value:function(e,t){this.getIsConnected(e,t)||(this.arrayNeighbors[e]||(this.arrayNeighbors[e]=[]),this.arrayNeighbors[t]||(this.arrayNeighbors[t]=[]),this.arrayNeighbors[e].push(t),this.arrayNeighbors[t].push(e),this.flatNeighbors[this._canonicalize(e,t)]=[e,t])}},{key:"unconnect",value:function(e,t){this.arrayNeighbors[e]=this.arrayNeighbors[e].filter((function(e){return e!=t})),this.arrayNeighbors[t]=this.arrayNeighbors[t].filter((function(t){return t!=e})),delete this.flatNeighbors[this._canonicalize(e,t)]}}]),e}(),de=40,he=80;function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:800,y:600},r=new fe(n),a=new ie(e),o=1,i=function(){return"".concat(o++)},s={id:i(),point:{x:400,y:300},slots:a.getSlots(6)},l=[s];r.addStar(s);var u=0,c=0;while(u<t&&c<10*t){c+=1;var f=a.choice(l),d=a.chooseAndRemove(f.slots);f.slots.length||l.splice(l.indexOf(f),1);var h=a.float(de,1.2*de),v=f.point,p={x:v.x+Math.cos(d)*h,y:v.y+Math.sin(d)*h};if(isNaN(p.x)||isNaN(p.y),r.getIsNewPointAllowed(p)){var y={id:i(),point:p,slots:a.getSlots(a.int(3,6))};r.addStar(y),r.connect(f.id,y.id),l.push(y),u+=1}}for(var m in r.stars){var g=r.stars[m];for(var b in r.stars)if(b!==m&&!r.getIsConnected(m,b)){var S=r.stars[b];ce(g.point,S.point)<he&&r.getIsConnectionAllowed(g,S)&&a.getRandom()<.2&&r.connect(m,b)}}return r}n("fb6a"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0");var pe=n("dc8b"),ye=n.n(pe),me=ye.a.createGrammar({govtname:["#prefixtype# #nouns#","#prefixtype# #nouns#","#prefixtype# #nouns#","#prefixtype# #nouns#","#prefixtype# #nouns#","#prefixtype# #nouns#","#noun# #suffixtype#","#noun# #suffixtype#","#noun# #suffixtype#","#noun# #suffixtype#","#noun# #suffixtype#","#noun# #suffixtype#","#ordinal# #noun# #suffixtype#","#ordinal# #noun# #suffixtype#","#ordinal# #suffixtype#"],ordinal:["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth"],suffixtype:["Union","Kingdom","Colonies","Republic","Empire","Federation","Confederation","Imperium","Principality","Sphere","Region"],prefixtype:["United #suffixtype# of","Democratic #suffixtype# of","#suffixtype# of","#ordinal# #suffixtype# of"],star:["Planet","Star","Sun","System"],stars:["Planets","Stars","Suns","Systems"],noun:["#star#","#nonsense#"],nouns:["#stars#","#nonsense#"],nonsense:["#capcons##vowel##consjoin##vowel##cons#","#capcons##vowel##cons#","#capvowel##vowel##consjoin##vowel##cons#"],capvowel:["A","E","I","O","U","A","E","I","O","U","Aea","Ei","Oi","Oo","Ou","Eu"],vowel:["a","e","i","o","u","a","e","i","o","u","a","e","i","o","u","y","y","aea","ei","oi","oio","oo","ou","eu"],consjoin:["#cons##cons#"],capcons:["B","C","D","F","G","J","K","L","M","N","P","R","S","T","V","W","X","Z"],cons:["b","c","d","f","g","j","k","l","m","n","p","r","s","t","v","w","x","z"]}),ge=me,be=["#d32f2f","#7B1FA2","#0288D1","#689F38","#FBC02D","#F57C00"],Se={makeGovts:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new ie(e),o=a.shuffled(t.heyNow()),i=a.shuffled(be).slice(0,r),s=new Set,l=i.map((function(e){var t=a.replaceMathRandom((function(){return ge.flatten("#govtname#")}));while(s.has(t))t=a.replaceMathRandom((function(){return ge.flatten("#govtname#")}));return s.add(t),{govt:{name:t,color:e},count:0,open:[],closed:[]}})),u=new Set(o.map((function(e){return e.id}))),c={},f=new Set,d=new Array,h=Object(le["a"])(o);try{for(h.s();!(n=h.n()).done;){var v=n.value;if(!f.has(v.id)){d.push(v.id);var p,y=Object(le["a"])(t.getNeighbors(v));try{for(y.s();!(p=y.n()).done;){var m=p.value;f.add(m.id)}}catch(R){y.e(R)}finally{y.f()}}}}catch(R){h.e(R)}finally{h.f()}if(d.length<r)throw new Error("Can't generate govts");for(var g=0;g<l.length;g++){var b=d[g];u.delete(b),c[b]=l[g].govt,l[g].closed.push(b),l[g].count=1;var S,x=Object(le["a"])(t.getNeighborIDs(b));try{for(x.s();!(S=x.n()).done;){var w=S.value;l[g].open.push(w)}}catch(R){x.e(R)}finally{x.f()}}var k=0,O=0;while(u.size&&O<10*o.length){O+=1;var j=l[k],M=j.open.pop();if(M&&(a.shuffle(j.open),!c[M])){u.delete(M),j.count+=1,j.closed.push(M),c[M]=j.govt;var N,I=Object(le["a"])(t.getNeighborIDs(M));try{for(I.s();!(N=I.n()).done;){var _=N.value;j.open.push(_)}}catch(R){I.e(R)}finally{I.f()}}k=(k+1)%l.length}var D,G=Object(le["a"])(l);try{for(G.s();!(D=G.n()).done;){var C=D.value;if(C.count<5||C.count<o.length/(3*r))return console.log("Reroll govts"),Se.makeGovts(e+"-reroll",t,r)}}catch(R){G.e(R)}finally{G.f()}return c}},xe=ye.a.createGrammar({starname:["#greek# #numseq#","#greek# #numseq#","#numbers# #greek#","#numbers# #greek#","#letters# #numseq#","#numbers# #greek# #numseq#"],numseq:["#numbers#","#numbers#","#numbers#","#numbers# #letter#","#numbers#-#letterorletters#","#letterorletters# #numbers#","#numbers##numbers#","#numbers#-#letter##number#","#numbers#-#number#"],letterorletters:["#letter#","#letter#","#letter#","#letter#","#letters#","#letters#"],letters:["#letter##letter#","#letter##letter##letter#"],numbers:["#number#","#number##number#","#number##number#","#number##number##number#"],letter:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],number:["0","1","2","3","4","5","6","7","8","9"],greek:["#firstconsonant##ending-mv#","#firstconsonant##ending-mv#","#firstvowel##midletters##ending#","#firstvowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstvowel##midletters##vowel##midletters##ending#"],firstvowel:["A","Ae","Ai","E","Eio","Eu","I","Ia","O","Ou"],firstconsonant:["B","B","B","Br","D","D","D","Dr","G","G","G","Gl","H","H","H","K","K","K","Kh","Kh","Kh","Kl","Kr","L","L","L","M","M","M","N","N","N","P","P","P","Ph","Ph","Ph","Phr","Pr","R","R","R","Rh","S","S","S","T","T","T","Th","Th","Th","Tr","X","X","X","Z","Z","Z"],vowel:["a","a","e","e","ei","eo","eu","i","io","o","ou","y"],midletters:["b","b","b","g","g","g","gn","k","k","k","kh","kh","kh","kl","kr","l","l","l","lk","m","m","m","mbr","mn","mp","mph","n","n","n","nd","ndr","nt","nth","p","p","p","p","ph","phr","pp","ps","r","r","r","rkh","rg","rm","rrh","rs","s","s","s","ss","sp","st","sth","t","t","t","th","th","th","tl","tr","x"],ending:["#ending-1v#","#ending-mv#","#ending-mv#","#ending-mv#"],"ending-1v":["a","e","o"],"ending-mv":["aos","as","aeus","es","ia","ia","ike","ios","on","ys"]}),we=xe;var ke={makeMetadata:function(e,t){var n,r={},a=Object(le["a"])(t.heyNow());try{for(a.s();!(n=a.n()).done;){var o=n.value;r[o.id]=ke.makeMetadataForStar(o.id)}}catch(i){a.e(i)}finally{a.f()}return r},makeMetadataForStar:function(e){var t=new ie(e);return t.replaceMathRandom((function(){return{name:we.flatten("#starname#")}}))}};r["a"].use(ne["a"]);var Oe={};function je(e){if(Oe[e])return Oe[e];var t=ve(e);return Oe[e]=t,t}var Me="".concat(Math.random()),Ne={namespaced:!0,state:{seed:Me,playerLocationStarID:je(Me).homeStarID},getters:{galaxy:function(e){return je(e.seed)},govtMap:function(e){return Se.makeGovts(e.seed,je(e.seed))},metadataMap:function(e){return ke.makeMetadata(e.seed,je(e.seed))},playerStar:function(e){return e.playerLocationStarID?je(e.seed).stars[e.playerLocationStarID]:null},playerStarGovt:function(e){return e.playerLocationStarID?Se.makeGovts(e.seed,je(e.seed))[e.playerLocationStarID]:null},playerStarMetadata:function(e){return e.playerLocationStarID?ke.makeMetadataForStar(e.playerLocationStarID):null}},actions:{},mutations:{travel:function(e,t){e.playerLocationStarID=t},newRandomSeed:function(e){e.seed="".concat(Math.random());var t=je(e.seed);e.playerLocationStarID=t.homeStarID}}},Ie=new ne["a"].Store({modules:{game:Ne},plugins:[(new re["a"]).plugin]});r["a"].config.productionTip=!1,new r["a"]({router:te,store:Ie,render:function(e){return e(u)}}).$mount("#app")},eaa4:function(e,t,n){},f851:function(e,t,n){"use strict";var r=n("4474"),a=n.n(r);a.a}});
//# sourceMappingURL=app.54e51671.js.map