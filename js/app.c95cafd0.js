(function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],f=0,h=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"71ae":function(t,e,n){},"9c0c":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("5c0b"),n("2877")),s={},c=Object(i["a"])(s,a,o,!1,null,null,null),l=c.exports,u=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Starmap",{attrs:{seed:"1234"}})],1)},h=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"Starmap",attrs:{width:t.galaxy.size.x,height:t.galaxy.size.y},on:{click:t.click}},[t._l(t.allNeighbors,(function(t){return n("line",{key:t[0].id+"-"+t[1].id,attrs:{x1:t[0].point.x,y1:t[0].point.y,x2:t[1].point.x,y2:t[1].point.y,stroke:"gray"}})})),t._l(Object.values(t.galaxy.stars),(function(e){return n("circle",{key:e.id+"2",staticClass:"Starmap_Star_Govt",attrs:{id:e.id,cx:e.point.x,cy:e.point.y,r:10,fill:t.getStarColor(e),"fill-opacity":"0.7"}})})),t._l(Object.values(t.galaxy.stars),(function(t){return n("circle",{key:t.id,staticClass:"Starmap_Star",attrs:{id:t.id,cx:t.point.x,cy:t.point.y,r:5,fill:"black",stroke:"white"}})}))],2)},v=[],y=n("d4ec"),p=n("bee2"),g=n("262e"),b=n("2caf"),m=n("9ab4"),x=n("60a3"),w=n("4bb5");function O(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?(console.log(t,e),e):e}var j=Object(w["a"])("game"),N=function(t){Object(g["a"])(n,t);var e=Object(b["a"])(n);function n(){return Object(y["a"])(this,n),e.apply(this,arguments)}return Object(p["a"])(n,[{key:"getStarColor",value:function(t){return this.govtMap[t.id]?this.govtMap[t.id].color:"#616161"}},{key:"state",get:function(){return this.$store.state}},{key:"allNeighbors",get:function(){return O("allNeighbors",this.galaxy.getAllNeighbors(),!1)}}]),n}(x["b"]);Object(m["a"])([j.State],N.prototype,"seed",void 0),Object(m["a"])([j.Getter],N.prototype,"govtMap",void 0),Object(m["a"])([j.Getter],N.prototype,"galaxy",void 0),Object(m["a"])([j.Mutation("newRandomSeed")],N.prototype,"click",void 0),N=Object(m["a"])([x["a"]],N);var k=N,S=k,M=(n("ea9d"),Object(i["a"])(S,d,v,!1,null,null,null)),_=M.exports,I={name:"Home",components:{Starmap:_}},C=I,A=Object(i["a"])(C,f,h,!1,null,null,null),R=A.exports;r["a"].use(u["a"]);var P=[{path:"/",name:"Home",component:R}],z=new u["a"]({routes:P}),D=z,G=n("2f62"),$=n("bfa9"),E=(n("c975"),n("a434"),n("99af"),n("6125")),F=n.n(E),T=function(){function t(e){Object(y["a"])(this,t),this.getRandom=F()(e)}return Object(p["a"])(t,[{key:"int",value:function(t,e){return t+Math.floor(this.getRandom()*e)}},{key:"float",value:function(t,e){return t+this.getRandom()*(e-t)}},{key:"choice",value:function(t){return t[Math.floor(this.getRandom()*t.length)]}},{key:"chooseAndRemove",value:function(t){var e=Math.floor(this.getRandom()*t.length);return t.splice(e,1)[0]}},{key:"shuffled",value:function(t){var e=(new Array).concat(t);return this.shuffle(e),e}},{key:"shuffle",value:function(t){var e,n,r=t.length;while(0!==r)n=Math.floor(this.getRandom()*r),r-=1,e=t[r],t[r]=t[n],t[n]=e;return t}},{key:"getSlots",value:function(t){for(var e=new Array,n=this.getRandom(),r=0;r<t;r++)n>2*Math.PI&&(n-=2*Math.PI),e.push(n),n+=2*Math.PI/t;return e}}]),t}(),B=n("82fd"),H=n.n(B),J=function(){return H()().new()};function L(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}n("4de4"),n("d81d"),n("07ac");var q=n("3835"),K=n("b85c");function Q(t,e,n,r){if(t.x===e.x&&t.y===e.y||n.x===r.x&&n.y===r.y)return!1;var a=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0===a)return!1;var o=((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/a,i=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/a;return!(o<0||o>1||i<0||i>1)}var U=function(){function t(e){Object(y["a"])(this,t),this.stars={},this.arrayNeighbors={},this.flatNeighbors={},this.size=e}return Object(p["a"])(t,[{key:"heyNow",value:function(){return Object.values(this.stars)}},{key:"addStar",value:function(t){this.homeStarID||(this.homeStarID=t.id),this.stars[t.id]=t}},{key:"getAllNeighbors",value:function(){var t=this;return Object.values(this.flatNeighbors).map((function(e){return[t.stars[e[0]],t.stars[e[1]]]}))}},{key:"getNeighbors",value:function(t){var e=this;return(this.arrayNeighbors[t.id]||[]).map((function(t){return e.stars[t]}))}},{key:"getNeighborIDs",value:function(t){return this.arrayNeighbors[t]||[]}},{key:"getIsNewPointAllowed",value:function(t){if(t.x<10||t.y<10||t.x>this.size.x-10||t.y>this.size.y-10)return!1;for(var e in this.stars)if(L(this.stars[e].point,t)<V)return!1;return!0}},{key:"getIsConnectionAllowed",value:function(t,e){var n,r=Object(K["a"])(this.getAllNeighbors());try{for(r.s();!(n=r.n()).done;){var a=Object(q["a"])(n.value,2),o=a[0],i=a[1];if(t!==o&&t!==i&&e!==o&&e!==i&&Q(t.point,e.point,o.point,i.point))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}},{key:"_canonicalize",value:function(t,e){return t.localeCompare(e)<0?"".concat(t,"-").concat(e):"".concat(e,"-").concat(t)}},{key:"getIsConnected",value:function(t,e){return this.flatNeighbors[this._canonicalize(t,e)]}},{key:"connect",value:function(t,e){this.getIsConnected(t,e)||(this.arrayNeighbors[t]||(this.arrayNeighbors[t]=[]),this.arrayNeighbors[e]||(this.arrayNeighbors[e]=[]),this.arrayNeighbors[t].push(e),this.arrayNeighbors[e].push(t),this.flatNeighbors[this._canonicalize(t,e)]=[t,e])}},{key:"unconnect",value:function(t,e){this.arrayNeighbors[t]=this.arrayNeighbors[t].filter((function(t){return t!=e})),this.arrayNeighbors[e]=this.arrayNeighbors[e].filter((function(e){return e!=t})),delete this.flatNeighbors[this._canonicalize(t,e)]}}]),t}(),V=40,W=80;function X(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:800,y:600},r=new U(n),a=new T(t),o={id:J(),point:{x:400,y:300},slots:a.getSlots(6)},i=[o];r.addStar(o);var s=0,c=0;while(s<e&&c<10*e){c+=1;var l=a.choice(i),u=a.chooseAndRemove(l.slots);l.slots.length||i.splice(i.indexOf(l),1);var f=a.float(V,1.2*V),h=l.point,d={x:h.x+Math.cos(u)*f,y:h.y+Math.sin(u)*f};if(isNaN(d.x)||isNaN(d.y),r.getIsNewPointAllowed(d)){var v={id:J(),point:d,slots:a.getSlots(a.int(3,6))};r.addStar(v),r.connect(l.id,v.id),i.push(v),s+=1}}for(var y in r.stars){var p=r.stars[y];for(var g in r.stars)if(g!==y&&!r.getIsConnected(y,g)){var b=r.stars[g];L(p.point,b.point)<W&&r.getIsConnectionAllowed(p,b)&&a.getRandom()<.2&&r.connect(y,g)}}return r}n("fb6a"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0");var Y=["#d32f2f","#7B1FA2","#0288D1","#689F38","#FBC02D","#F57C00"],Z={makeGovts:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new T(t),o=a.shuffled(e.heyNow()),i=a.shuffled(Y).slice(0,r),s=i.map((function(t){return{govt:{name:t,color:t},count:0,open:[],closed:[]}})),c=new Set(o.map((function(t){return t.id}))),l={},u=new Set,f=new Array,h=Object(K["a"])(o);try{for(h.s();!(n=h.n()).done;){var d=n.value;if(!u.has(d.id)){f.push(d.id);var v,y=Object(K["a"])(e.getNeighbors(d));try{for(y.s();!(v=y.n()).done;){var p=v.value;u.add(p.id)}}catch(R){y.e(R)}finally{y.f()}}}}catch(R){h.e(R)}finally{h.f()}if(f.length<r)throw new Error("Can't generate govts");for(var g=0;g<s.length;g++){var b=f[g];c.delete(b),l[b]=s[g].govt,s[g].closed.push(b),s[g].count=1;var m,x=Object(K["a"])(e.getNeighborIDs(b));try{for(x.s();!(m=x.n()).done;){var w=m.value;s[g].open.push(w)}}catch(R){x.e(R)}finally{x.f()}}var O=0,j=0;while(c.size&&j<10*o.length){j+=1;var N=s[O];if(N.open.length){a.shuffle(N.open);var k=N.open.pop();if(!l[k]){c.delete(k),N.count+=1,N.closed.push(k),l[k]=N.govt;var S,M=Object(K["a"])(e.getNeighborIDs(k));try{for(M.s();!(S=M.n()).done;){var _=S.value;N.open.push(_)}}catch(R){M.e(R)}finally{M.f()}}}O=(O+1)%s.length}var I,C=Object(K["a"])(s);try{for(C.s();!(I=C.n()).done;){var A=I.value;if(A.count<5||A.count<o.length/(3*r))return console.log("Reroll govts"),Z.makeGovts(t+"-reroll",e,r)}}catch(R){C.e(R)}finally{C.f()}return l}};r["a"].use(G["a"]);var tt={};function et(t){if(tt[t])return tt[t];var e=X(t);return tt[t]=e,e}var nt={namespaced:!0,state:{seed:"".concat(Math.random()),playerLocationStarID:null},getters:{galaxy:function(t){return et(t.seed)},govtMap:function(t){return Z.makeGovts(t.seed,et(t.seed))}},actions:{},mutations:{newRandomSeed:function(t){t.seed="".concat(Math.random());var e=et(t.seed);t.playerLocationStarID=e.homeStarID}}},rt=new G["a"].Store({modules:{game:nt},plugins:[(new $["a"]).plugin]});r["a"].config.productionTip=!1,new r["a"]({router:D,store:rt,render:function(t){return t(l)}}).$mount("#app")},ea9d:function(t,e,n){"use strict";var r=n("71ae"),a=n.n(r);a.a}});
//# sourceMappingURL=app.c95cafd0.js.map