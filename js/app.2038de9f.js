(function(t){function e(e){for(var n,i,s=e[0],l=e[1],u=e[2],h=0,f=[];h<s.length;h++)i=s[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"02ea":function(t,e,r){"use strict";var n=r("d699"),a=r.n(n);a.a},1:function(t,e){},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"9c0c":function(t,e,r){},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],i=(r("5c0b"),r("2877")),s={},l=Object(i["a"])(s,a,o,!1,null,null,null),u=l.exports,c=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Starmap",{attrs:{seed:"1234"}})],1)},f=[],d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"Starmap",attrs:{width:t.galaxy.size.x,height:t.galaxy.size.y},on:{click:t.click}},[t._l(t.allNeighbors,(function(t){return r("line",{key:t[0].id+"-"+t[1].id,attrs:{x1:t[0].point.x,y1:t[0].point.y,x2:t[1].point.x,y2:t[1].point.y,stroke:"gray"}})})),t._l(Object.values(t.galaxy.stars),(function(e){return r("g",{key:e.id+"2",staticClass:"Starmap_Star",attrs:{id:e.id,"data-id":"star.id"},on:{mouseenter:function(r){return t.setActiveStar(e)}}},[r("circle",{staticClass:"Starmap_Star_Govt",attrs:{cx:e.point.x,cy:e.point.y,r:10,fill:t.getStarColor(e),"fill-opacity":"0.7"}}),r("circle",{staticClass:"Starmap_Star_Inner",attrs:{cx:e.point.x,cy:e.point.y,r:5,fill:"black",stroke:"white"}})])})),t.activeStar?r("text",{staticClass:"Starmap_Star_Label",attrs:{x:t.activeStar.point.x-40,y:t.activeStar.point.y-20}},[t._v(" "+t._s(t.getStarName(t.activeStar))+" ")]):t._e()],2)},v=[],g=(r("b0c0"),r("d4ec")),p=r("bee2"),y=r("262e"),m=r("2caf"),b=r("9ab4"),k=r("60a3"),w=r("4bb5");function x(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?(console.log(t,e),e):e}var S=Object(w["a"])("game"),N=function(t){Object(y["a"])(r,t);var e=Object(m["a"])(r);function r(){var t;return Object(g["a"])(this,r),t=e.apply(this,arguments),t.activeStar=null,t}return Object(p["a"])(r,[{key:"getStarColor",value:function(t){return this.govtMap[t.id]?this.govtMap[t.id].color:"#616161"}},{key:"getStarName",value:function(t){return this.metadataMap[t.id]?this.metadataMap[t.id].name:"unknown"}},{key:"setActiveStar",value:function(t){console.log("activate",t),this.activeStar=t}},{key:"state",get:function(){return this.$store.state}},{key:"allNeighbors",get:function(){return x("allNeighbors",this.galaxy.getAllNeighbors(),!1)}}]),r}(k["b"]);Object(b["a"])([S.State],N.prototype,"seed",void 0),Object(b["a"])([S.Getter],N.prototype,"govtMap",void 0),Object(b["a"])([S.Getter],N.prototype,"metadataMap",void 0),Object(b["a"])([S.Getter],N.prototype,"galaxy",void 0),Object(b["a"])([S.Mutation("newRandomSeed")],N.prototype,"click",void 0),N=Object(b["a"])([k["a"]],N);var O=N,j=O,M=(r("02ea"),Object(i["a"])(j,d,v,!1,null,"59a3ac70",null)),_=M.exports,I={name:"Home",components:{Starmap:_}},P=I,A=Object(i["a"])(P,h,f,!1,null,null,null),R=A.exports;n["a"].use(c["a"]);var C=[{path:"/",name:"Home",component:R}],D=new c["a"]({routes:C}),G=D,T=r("2f62"),z=r("bfa9"),K=(r("c975"),r("a434"),r("99af"),r("6125")),E=r.n(K),B=function(){function t(e){Object(g["a"])(this,t),this.getRandom=E()(e)}return Object(p["a"])(t,[{key:"int",value:function(t,e){return t+Math.floor(this.getRandom()*e)}},{key:"float",value:function(t,e){return t+this.getRandom()*(e-t)}},{key:"choice",value:function(t){return t[Math.floor(this.getRandom()*t.length)]}},{key:"chooseAndRemove",value:function(t){var e=Math.floor(this.getRandom()*t.length);return t.splice(e,1)[0]}},{key:"shuffled",value:function(t){var e=(new Array).concat(t);return this.shuffle(e),e}},{key:"shuffle",value:function(t){var e,r,n=t.length;while(0!==n)r=Math.floor(this.getRandom()*n),n-=1,e=t[n],t[n]=t[r],t[r]=e;return t}},{key:"getSlots",value:function(t){for(var e=new Array,r=this.getRandom(),n=0;n<t;n++)r>2*Math.PI&&(r-=2*Math.PI),e.push(r),r+=2*Math.PI/t;return e}}]),t}(),L=(r("4de4"),r("d81d"),r("07ac"),r("3835")),q=r("b85c");function H(t,e,r,n){if(t.x===e.x&&t.y===e.y||r.x===n.x&&r.y===n.y)return!1;var a=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0===a)return!1;var o=((n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x))/a,i=((e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x))/a;return!(o<0||o>1||i<0||i>1)}var F=r("82fd"),$=r.n(F),X=function(){return $()().new()};function Z(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var J=function(){function t(e){Object(g["a"])(this,t),this.stars={},this.arrayNeighbors={},this.flatNeighbors={},this.size=e}return Object(p["a"])(t,[{key:"heyNow",value:function(){return Object.values(this.stars)}},{key:"addStar",value:function(t){this.homeStarID||(this.homeStarID=t.id),this.stars[t.id]=t}},{key:"getAllNeighbors",value:function(){var t=this;return Object.values(this.flatNeighbors).map((function(e){return[t.stars[e[0]],t.stars[e[1]]]}))}},{key:"getNeighbors",value:function(t){var e=this;return(this.arrayNeighbors[t.id]||[]).map((function(t){return e.stars[t]}))}},{key:"getNeighborIDs",value:function(t){return this.arrayNeighbors[t]||[]}},{key:"getIsNewPointAllowed",value:function(t){if(t.x<10||t.y<10||t.x>this.size.x-10||t.y>this.size.y-10)return!1;for(var e in this.stars)if(Z(this.stars[e].point,t)<Q)return!1;return!0}},{key:"getIsConnectionAllowed",value:function(t,e){var r,n=Object(q["a"])(this.getAllNeighbors());try{for(n.s();!(r=n.n()).done;){var a=Object(L["a"])(r.value,2),o=a[0],i=a[1];if(t!==o&&t!==i&&e!==o&&e!==i&&H(t.point,e.point,o.point,i.point))return!1}}catch(s){n.e(s)}finally{n.f()}return!0}},{key:"_canonicalize",value:function(t,e){return t.localeCompare(e)<0?"".concat(t,"-").concat(e):"".concat(e,"-").concat(t)}},{key:"getIsConnected",value:function(t,e){return this.flatNeighbors[this._canonicalize(t,e)]}},{key:"connect",value:function(t,e){this.getIsConnected(t,e)||(this.arrayNeighbors[t]||(this.arrayNeighbors[t]=[]),this.arrayNeighbors[e]||(this.arrayNeighbors[e]=[]),this.arrayNeighbors[t].push(e),this.arrayNeighbors[e].push(t),this.flatNeighbors[this._canonicalize(t,e)]=[t,e])}},{key:"unconnect",value:function(t,e){this.arrayNeighbors[t]=this.arrayNeighbors[t].filter((function(t){return t!=e})),this.arrayNeighbors[e]=this.arrayNeighbors[e].filter((function(e){return e!=t})),delete this.flatNeighbors[this._canonicalize(t,e)]}}]),t}(),Q=40,U=80;function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:800,y:600},n=new J(r),a=new B(t),o={id:X(),point:{x:400,y:300},slots:a.getSlots(6)},i=[o];n.addStar(o);var s=0,l=0;while(s<e&&l<10*e){l+=1;var u=a.choice(i),c=a.chooseAndRemove(u.slots);u.slots.length||i.splice(i.indexOf(u),1);var h=a.float(Q,1.2*Q),f=u.point,d={x:f.x+Math.cos(c)*h,y:f.y+Math.sin(c)*h};if(isNaN(d.x)||isNaN(d.y),n.getIsNewPointAllowed(d)){var v={id:X(),point:d,slots:a.getSlots(a.int(3,6))};n.addStar(v),n.connect(u.id,v.id),i.push(v),s+=1}}for(var g in n.stars){var p=n.stars[g];for(var y in n.stars)if(y!==g&&!n.getIsConnected(g,y)){var m=n.stars[y];Z(p.point,m.point)<U&&n.getIsConnectionAllowed(p,m)&&a.getRandom()<.2&&n.connect(g,y)}}return n}r("fb6a"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0");var W=["#d32f2f","#7B1FA2","#0288D1","#689F38","#FBC02D","#F57C00"],Y={makeGovts:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=new B(t),o=a.shuffled(e.heyNow()),i=a.shuffled(W).slice(0,n),s=i.map((function(t){return{govt:{name:t,color:t},count:0,open:[],closed:[]}})),l=new Set(o.map((function(t){return t.id}))),u={},c=new Set,h=new Array,f=Object(q["a"])(o);try{for(f.s();!(r=f.n()).done;){var d=r.value;if(!c.has(d.id)){h.push(d.id);var v,g=Object(q["a"])(e.getNeighbors(d));try{for(g.s();!(v=g.n()).done;){var p=v.value;c.add(p.id)}}catch(R){g.e(R)}finally{g.f()}}}}catch(R){f.e(R)}finally{f.f()}if(h.length<n)throw new Error("Can't generate govts");for(var y=0;y<s.length;y++){var m=h[y];l.delete(m),u[m]=s[y].govt,s[y].closed.push(m),s[y].count=1;var b,k=Object(q["a"])(e.getNeighborIDs(m));try{for(k.s();!(b=k.n()).done;){var w=b.value;s[y].open.push(w)}}catch(R){k.e(R)}finally{k.f()}}var x=0,S=0;while(l.size&&S<10*o.length){S+=1;var N=s[x],O=N.open.pop();if(O&&(a.shuffle(N.open),!u[O])){l.delete(O),N.count+=1,N.closed.push(O),u[O]=N.govt;var j,M=Object(q["a"])(e.getNeighborIDs(O));try{for(M.s();!(j=M.n()).done;){var _=j.value;N.open.push(_)}}catch(R){M.e(R)}finally{M.f()}}x=(x+1)%s.length}var I,P=Object(q["a"])(s);try{for(P.s();!(I=P.n()).done;){var A=I.value;if(A.count<5||A.count<o.length/(3*n))return console.log("Reroll govts"),Y.makeGovts(t+"-reroll",e,n)}}catch(R){P.e(R)}finally{P.f()}return u}},tt=r("dc8b"),et=r.n(tt),rt=et.a.createGrammar({starname:["#greek# #numseq#","#greek# #numseq#","#numbers# #greek#","#numbers# #greek#","#letters# #numseq#","#numbers# #greek# #numseq#"],numseq:["#numbers#","#numbers#","#numbers#","#numbers# #letter#","#numbers#-#letterorletters#","#letterorletters# #numbers#","#numbers##numbers#","#numbers#-#letter##number#","#numbers#-#number#"],letterorletters:["#letter#","#letter#","#letter#","#letter#","#letters#","#letters#"],letters:["#letter##letter#","#letter##letter##letter#"],numbers:["#number#","#number##number#","#number##number#","#number##number##number#"],letter:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],number:["0","1","2","3","4","5","6","7","8","9"],greek:["#firstconsonant##ending-mv#","#firstconsonant##ending-mv#","#firstvowel##midletters##ending#","#firstvowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstconsonant##vowel##midletters##ending#","#firstvowel##midletters##vowel##midletters##ending#"],firstvowel:["A","Ae","Ai","E","Eio","Eu","I","Ia","O","Ou"],firstconsonant:["B","B","B","Br","D","D","D","Dr","G","G","G","Gl","H","H","H","K","K","K","Kh","Kh","Kh","Kl","Kr","L","L","L","M","M","M","N","N","N","P","P","P","Ph","Ph","Ph","Phr","Pr","R","R","R","Rh","S","S","S","T","T","T","Th","Th","Th","Tr","X","X","X","Z","Z","Z"],vowel:["a","a","e","e","ei","eo","eu","i","io","o","ou","y"],midletters:["b","b","b","g","g","g","gn","k","k","k","kh","kh","kh","kl","kr","l","l","l","lk","m","m","m","mbr","mn","mp","mph","n","n","n","nd","ndr","nt","nth","p","p","p","p","ph","phr","pp","ps","r","r","r","rkh","rg","rm","rrh","rs","s","s","s","ss","sp","st","sth","t","t","t","th","th","th","tl","tr","x"],ending:["#ending-1v#","#ending-mv#","#ending-mv#","#ending-mv#"],"ending-1v":["a","e","o"],"ending-mv":["aos","as","aeus","es","ia","ia","ike","ios","on","ys"]}),nt=rt;function at(t,e){var r=Math.random;Math.random=t;var n=e();return Math.random=r,n}var ot={makeMetadata:function(t,e){return at(new B(t).getRandom,(function(){var t,r={},n=Object(q["a"])(e.heyNow());try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a.id]={name:nt.flatten("#starname#")}}}catch(o){n.e(o)}finally{n.f()}return r}))}};n["a"].use(T["a"]);var it={};function st(t){if(it[t])return it[t];var e=V(t);return it[t]=e,e}var lt={namespaced:!0,state:{seed:"".concat(Math.random()),playerLocationStarID:null},getters:{galaxy:function(t){return st(t.seed)},govtMap:function(t){return Y.makeGovts(t.seed,st(t.seed))},metadataMap:function(t){return ot.makeMetadata(t.seed,st(t.seed))}},actions:{},mutations:{newRandomSeed:function(t){t.seed="".concat(Math.random());var e=st(t.seed);t.playerLocationStarID=e.homeStarID}}},ut=new T["a"].Store({modules:{game:lt},plugins:[(new z["a"]).plugin]});n["a"].config.productionTip=!1,new n["a"]({router:G,store:ut,render:function(t){return t(u)}}).$mount("#app")},d699:function(t,e,r){}});
//# sourceMappingURL=app.2038de9f.js.map